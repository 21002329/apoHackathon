<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.3.1/flatly/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Numeric JS -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/numeric/1.2.6/numeric.min.js"></script>


    <!-- timesheet -->
      <style>
        canvas {
          -moz-user-select: none;
          -webkit-user-select: none;
          -ms-user-select: none;
        }
      </style>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
      <script src="./js/Chart.min.js"></script>
      <script src="./js/Chart_utils.js"></script>


    <style>img.bannerApoBank{
      max-width:80%;
      max-height:80%;
    }</style>

    <!-- own java script stuff -->
    <script type = "text/javascript" src="./js/utils.js"></script>
    <script>
      function doSomething(){
        finoRegister();
		var minPerc2Invest = 30;
		var maxPercFixedCost = 50; 
		
        var data = getSpendingsPieChartData();

        Plotly.newPlot('Expenses', [data],{
          title: 'Top 5 Expenses',
          margin:{l: 1,r: 1,b: 1,t: 50,pad: 0},
          showlegend: false
        }, );


          //var forcasts = finoGetForcast();
					var dateFormat = 'MM DD YYYY';
					function randomNumber(min, max) {
						return Math.random() * (max - min) + min;
					}

					function randomBar(date, lastClose) {
						var open = randomNumber(lastClose * 0.95, lastClose * 1.05).toFixed(2);
						var close = randomNumber(open * 0.95, open * 1.05).toFixed(2);
						return {
							t: date.valueOf(),
							y: close
						};
					}

					var date = moment('April 01 2017', dateFormat);
					var data = [randomBar(date, 30)];
					while (data.length < 60) {
						date = date.clone().add(1, 'd');
						if (date.isoWeekday() <= 5) {
							data.push(randomBar(date, data[data.length - 1].y));
						}
					}
					console.log(data);
					var ctx = document.getElementById('chart1').getContext('2d');
					ctx.canvas.width = 1000;
					ctx.canvas.height = 300;

					var color = Chart.helpers.color;
					var cfg = {
						type: 'bar',
						data: {
							datasets: [{
								label: 'My Account Balance and Forcast',
								backgroundColor: color(window.chartColors.green).alpha(0.5).rgbString(),
								borderColor: window.chartColors.green,
								data: data,
								type: 'line',
								pointRadius: 0,
								fill: false,
								lineTension: 0,
								borderWidth: 2
							}]
						},
						options: {
							scales: {
								xAxes: [{
									type: 'time',
									distribution: 'series',
									ticks: {
										source: 'data',
										autoSkip: true
									}
								}],
								yAxes: [{
									scaleLabel: {
										display: true,
										labelString: 'Amount in €'
									}
								}]
							},
							tooltips: {
								intersect: false,
								mode: 'index',
								callbacks: {
									label: function(tooltipItem, myData) {
										var label = myData.datasets[tooltipItem.datasetIndex].label || '';
										if (label) {
											label += ': ';
										}
										label += parseFloat(tooltipItem.value).toFixed(2);
										return label;
									}
								}
							}
						}
					};

					var chart = new Chart(ctx, cfg);

					document.getElementById('update').addEventListener('click', function() {
						var type = document.getElementById('type').value;
						chart.config.data.datasets[0].type = type;
						chart.update();
					});
				
        $('#loginButton').hide();
        $('#main').show();

        //window.location.href = "./banking_home.html";
      }
    </script>
    <title>apoBank Hackathon</title>
  </head>



<body style="padding-top: 70px">


    <nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-primary">
      <a class="navbar-brand" href="#">apoBank</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarColor01">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
          </li>
        </ul>

        <button id="loginButton" class="btn btn-secondary my-2 my-sm-0" type="button" onclick="doSomething()">Login</button>
      </div>
    </nav>



    <div id="main" class="container">

      <div id="banner" class="page-header" style="padding: 20px">
        <div class="row">
          <div class="col-lg-8 col-sm-6">
            <h3 class="display-5">Hello Aniker! Das ist deine Finanzübersicht</h3>
          </div>
           <div class="col-lg-4 col-sm-6">
              <img class="bannerApoBank" src="./img/banner.png" align="right">
          </div>
        </div>
      </div>

      <div id="dashboard" class="bs-docs-section row col-lg-12 jumbotron">
        <div class="row">
          <div class="col-lg-12">
            <div class="jumbotron">
              <h2 class="display-5">Kontostatistiken</h2>
                  <div id="Expenses" class="col-lg-5 col-sm-5">
                      <!-- Plotly chart will be drawn inside this DIV -->
                  </div>

                  <div id="Table_Expenses" class="col-lg-5 col-sm-5">
                    <!-- Plotly chart will be drawn inside this DIV -->
                  </div>

                  <div style="width:1000px">
					          <canvas id="chart1"></canvas> <!-- Chart will be drawn inside this DIV -->
				          </div>

                  Chart Type:
                  <select id="type">
                    <option value="line">Line</option>
                    <option value="bar">Bar</option>
                  </select>
                  <button id="update">update</button>

              <hr class="my-2">
              <p class="lead">
                <a class="btn btn-primary btn-lg" href="#" role="button">Learn more</a>
              </p>
            </div>
          </div>
        </div>
      </div>


    <div id="user_action">
    <div class="row">
      <div class="col-sm-6">
      <div class="container">

          <div class="bs-component">
            <p>  </p>
            <div class="alert alert-dismissible alert-warning">
              <!-- <button type="button" class="close" data-dismiss="alert">&times;</button> -->
              <h4 class="alert-heading">Warning!</h4>
              <p class="mb-0">Best check yo self, you're not looking too good. Nulla vitae elit libero, a pharetra augue. Praesent commodo cursus magna, <a href="#" class="alert-link">vel scelerisque nisl consectetur et</a>.</p>
            </div>
          </div>

          <div class="bs-component">
            <p>  </p>
            <div class="alert alert-dismissible alert-warning">
              <!-- <button type="button" class="close" data-dismiss="alert">&times;</button> -->
              <h4 class="alert-heading">Warning!</h4>
              <p class="mb-0">Best check yo self, you're not looking too good. Nulla vitae elit libero, a pharetra augue. Praesent commodo cursus magna, <a href="#" class="alert-link">vel scelerisque nisl consectetur et</a>.</p>
            </div>
          </div>

          <div class="bs-component">
            <p>  </p>
            <div class="alert alert-dismissible alert-warning">
              <!-- <button type="button" class="close" data-dismiss="alert">&times;</button> -->
              <h4 class="alert-heading">Warning!</h4>
              <p class="mb-0">Best check yo self, you're not looking too good. Nulla vitae elit libero, a pharetra augue. Praesent commodo cursus magna, <a href="#" class="alert-link">vel scelerisque nisl consectetur et</a>.</p>
            </div>
          </div>

      </div>
      </div>


      <div class="col-md-4">
      <div class="container">

          <div class="bs-component">
            <p>  </p>
            <div class="alert alert-dismissible alert-warning">
              <!-- <button type="button" class="close" data-dismiss="alert">&times;</button> -->
              <h1 id = "firstAdvice" class="alert-heading"></h1>
            <script>
				document.getElementById("firstAdvice").innerHTML = "&#11145;";
				</script>
			</div>
          </div>

          <div class="bs-component">
            <p>  </p>
            <div class="alert alert-dismissible alert-warning">
              <!-- <button type="button" class="close" data-dismiss="alert">&times;</button> -->
              <h1 id= "secondAdvice"  class="alert-heading"></h1>
			  <script>
				document.getElementById("secondAdvice").innerHTML = "&#11145;";
				</script>
            </div>
          </div>

          <div class="bs-component">
            <p>  </p>
            <div class="alert alert-dismissible alert-warning">
              <!-- <button type="button" class="close" data-dismiss="alert">&times;</button> -->
              <h1 id ="thirdAdvice" class="alert-heading"></h1>
			<script>
				
			</script>
			</div>
          </div>
			
      </div>
      </div>

    </div>
    </div>


    </div>

    <script>
      $(document).ready(function(){
        $('#main').hide();
      });

    </script>

  </body>
</html>
